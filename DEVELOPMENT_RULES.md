# 🚫 ПРАВИЛА РАЗРАБОТКИ - ЗАПРЕТ ИЗМЕНЕНИЯ ОС

## ⚠️ КРИТИЧЕСКОЕ ПРАВИЛО

**НИКОГДА НЕ ИЗМЕНЯЙТЕ СИСТЕМНЫЕ НАСТРОЙКИ ОС ПОЛЬЗОВАТЕЛЯ!**

## 🎯 Принципы разработки

### ✅ ЧТО МОЖНО ДЕЛАТЬ
- **Адаптировать приложение** под существующую ОС
- **Использовать системные API** и библиотеки
- **Создавать конфигурационные файлы** в папке проекта
- **Оптимизировать код** приложения
- **Использовать переменные окружения** для настроек

### ❌ ЧТО ЗАПРЕЩЕНО ДЕЛАТЬ
- **Изменять системные конфигурации** (`/etc/`, `/sys/`, `/proc/`)
- **Модифицировать настройки звука** (PulseAudio, PipeWire, ALSA)
- **Изменять сетевые параметры** (`/etc/sysctl.conf`)
- **Менять CPU governor** или I/O scheduler
- **Устанавливать системные пакеты** без разрешения
- **Изменять пользовательские настройки** (`~/.config/`, `~/.bashrc`)

## 🛠️ Правильные подходы

### 1. Конфигурация приложения
```bash
# ✅ ПРАВИЛЬНО - создание конфига в папке проекта
cat > modern_client/Config/AudioSettings.ini << EOF
[Audio]
SampleRate=48000
BufferSize=1024
Latency=20
EOF
```

### 2. Использование переменных окружения
```bash
# ✅ ПРАВИЛЬНО - использование переменных
export AUDIO_LATENCY=20
export GRAPHICS_QUALITY=high
./modern_client/start_optimized.sh
```

### 3. Определение возможностей системы
```bash
# ✅ ПРАВИЛЬНО - определение без изменений
if command -v pulseaudio &> /dev/null; then
    AUDIO_SYSTEM="PulseAudio"
elif command -v pipewire &> /dev/null; then
    AUDIO_SYSTEM="PipeWire"
fi
```

## 🚫 Запрещенные действия

### ❌ НЕПРАВИЛЬНО - изменение системных настроек
```bash
# ❌ ЗАПРЕЩЕНО
echo "performance" | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor
echo "vm.swappiness=10" | sudo tee -a /etc/sysctl.conf
pactl set-default-sink-latency 20000
```

### ❌ НЕПРАВИЛЬНО - изменение пользовательских настроек
```bash
# ❌ ЗАПРЕЩЕНО
mkdir -p ~/.config/pipewire
cat > ~/.config/pipewire/pipewire.conf << EOF
# настройки
EOF
```

## 🔧 Исправление скриптов

### Проблемные скрипты (требуют исправления):
1. `modern_client/setup_ubuntu_optimization.sh` - изменяет системные настройки
2. `modern_client/system_optimization.sh` - изменяет CPU governor и sysctl
3. `modern_client/audio_optimization.sh` - изменяет настройки PipeWire
4. `modern_client/input_optimization.sh` - может изменять системные настройки

### Правильный подход:
- **Определять возможности** системы без изменений
- **Создавать профили** оптимизации в папке проекта
- **Использовать параметры запуска** для оптимизации
- **Предлагать пользователю** настройки вместо принудительного изменения

## 📋 Чек-лист для разработки

### Перед созданием скрипта:
- [ ] Скрипт изменяет только файлы в папке проекта?
- [ ] Не используются команды `sudo` для системных изменений?
- [ ] Не изменяются файлы в `/etc/`, `/sys/`, `/proc/`?
- [ ] Не модифицируются пользовательские настройки?
- [ ] Приложение адаптируется под систему, а не наоборот?

### Если нужно изменить системные настройки:
- [ ] Создать **опциональный** скрипт с предупреждением
- [ ] Запросить **явное разрешение** пользователя
- [ ] Предоставить **скрипт отката** изменений
- [ ] Документировать **все изменения** в системе

## 🎯 Цель

**Приложение должно работать с существующей системой, а не перестраивать её под себя!**

---

*Правила созданы: 28 сентября 2024*  
*Причина: Восстановление после неправильных изменений ОС*
