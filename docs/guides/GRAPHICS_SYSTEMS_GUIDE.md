# üé® –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º —Å–∏—Å—Ç–µ–º–∞–º Modern Lineage II

## üìã –û–±–∑–æ—Ä

Modern Lineage II –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–¥–æ–≤—ã–µ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–≥—Ä–æ–≤–æ–≥–æ –æ–ø—ã—Ç–∞ —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏.

## üéØ –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã

### 1. PBR Material Manager
**–§–∞–π–ª**: `PBRMaterialManager.h`

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è PBR (Physically Based Rendering) –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤:

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞–Ω–∞–ª—ã:
- **Albedo** - –±–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- **Normal** - –∫–∞—Ä—Ç–∞ –Ω–æ—Ä–º–∞–ª–µ–π –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
- **Roughness** - —à–µ—Ä–æ—Ö–æ–≤–∞—Ç–æ—Å—Ç—å –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ (0-1)
- **Metallic** - –º–µ—Ç–∞–ª–ª–∏—á–Ω–æ—Å—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (0-1)
- **Ambient Occlusion** - –∑–∞—Ç–µ–Ω–µ–Ω–∏–µ –æ—Ç –æ–∫—Ä—É–∂–∞—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **Emissive** - —Å–∞–º–æ—Å–≤–µ—á–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞

#### –§—É–Ω–∫—Ü–∏–∏:
```cpp
// –°–æ–∑–¥–∞–Ω–∏–µ PBR –º–∞—Ç–µ—Ä–∏–∞–ª–∞
UMaterialInstanceDynamic* CreatePBRMaterialInstance(const FString& MaterialID);

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∫ –º–µ—à—É
bool ApplyPBRMaterialToMesh(UMeshComponent* MeshComponent, const FString& MaterialID);

// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è L2 —Ç–µ–∫—Å—Ç—É—Ä –≤ PBR
bool ConvertLegacyL2Texture(const FString& LegacyTexturePath, const FString& MaterialID);
```

### 2. HDR Manager
**–§–∞–π–ª**: `HDRManager.h`

–°–∏—Å—Ç–µ–º–∞ HDR (High Dynamic Range) —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —ç–∫—Å–ø–æ–∑–∏—Ü–∏–µ–π:

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ HDR:
- **Max Brightness** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —è—Ä–∫–æ—Å—Ç—å (nits)
- **Min Brightness** - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —è—Ä–∫–æ—Å—Ç—å (nits)
- **Exposure Compensation** - –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏
- **Auto Exposure** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è

#### –¢–æ–Ω–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:
- **ACES** - Academy Color Encoding System
- **Film** - –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Ç–æ–Ω–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- **Custom** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### –§—É–Ω–∫—Ü–∏–∏:
```cpp
// –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ HDR
void SetHDREnabled(bool bEnabled);

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —è—Ä–∫–æ—Å—Ç–∏
void SetHDRBrightnessRange(float MinBrightness, float MaxBrightness);

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–∞ —Ç–æ–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
void ApplyToneMappingPreset(const FString& PresetName);
```

### 3. Dynamic Lighting Manager
**–§–∞–π–ª**: `DynamicLightingManager.h`

–°–∏—Å—Ç–µ–º–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ—Å–≤–µ—â–µ–Ω–∏—è —Å —Ü–∏–∫–ª–æ–º –¥–µ–Ω—å/–Ω–æ—á—å:

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Å–≤–µ—â–µ–Ω–∏—è:
- **Sun Light** - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–≤–µ—Ç —Å–æ–ª–Ω—Ü–∞
- **Sky Light** - –æ–∫—Ä—É–∂–∞—é—â–∏–π —Å–≤–µ—Ç –Ω–µ–±–∞
- **Point Lights** - —Ç–æ—á–µ—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–≤–µ—Ç–∞
- **Spot Lights** - –ø—Ä–æ–∂–µ–∫—Ç–æ—Ä—ã
- **Atmospheric Fog** - –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–π —Ç—É–º–∞–Ω

#### –¶–∏–∫–ª –¥–µ–Ω—å/–Ω–æ—á—å:
- **Time of Day** - –≤—Ä–µ–º—è —Å—É—Ç–æ–∫ (0-24 —á–∞—Å–∞)
- **Day Duration** - –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–Ω—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –º–∏–Ω—É—Ç–∞—Ö
- **Time Speed** - —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏
- **Weather Effects** - –ø–æ–≥–æ–¥–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

#### –§—É–Ω–∫—Ü–∏–∏:
```cpp
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
void SetTimeOfDay(float TimeOfDay);

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ—Å–µ—Ç–∞ –æ—Å–≤–µ—â–µ–Ω–∏—è
void LoadLightingPreset(const FString& PresetName);

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—É–º–∞–Ω–∞
void SetFogColor(const FLinearColor& Color);
void SetFogDensity(float Density);
```

### 4. Particle Effect Manager
**–§–∞–π–ª**: `ParticleEffectManager.h`

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Å—Ç–∏—Ü–∞–º–∏ –∏ VFX —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏:

#### –¢–∏–ø—ã —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:
- **Magic** - –º–∞–≥–∏—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- **Combat** - –±–æ–µ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- **Environmental** - –æ–∫—Ä—É–∂–∞—é—â–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- **UI** - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

#### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–∏—Å—Ç–µ–º—ã:
- **UE4 Particle System** - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —á–∞—Å—Ç–∏—Ü
- **Niagara** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

#### –§—É–Ω–∫—Ü–∏–∏:
```cpp
// –°–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞
int32 SpawnParticleEffect(const FString& EffectID, const FVector& Location);

// –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞
bool StopParticleEffect(int32 EffectHandle);

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —ç—Ñ—Ñ–µ–∫—Ç–∞
bool SetParticleEffectParameter(int32 EffectHandle, const FString& ParameterName, float Value);
```

### 5. Graphics Manager
**–§–∞–π–ª**: `GraphicsManager.h`

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –≤—Å–µ—Ö –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º:

#### –£—Ä–æ–≤–Ω–∏ –∫–∞—á–µ—Å—Ç–≤–∞:
- **Low** - –Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è —Å–ª–∞–±—ã—Ö —Å–∏—Å—Ç–µ–º
- **Medium** - —Å—Ä–µ–¥–Ω–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- **High** - –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- **Ultra** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- **Resolution Scale** - –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- **Anti-Aliasing** - —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ
- **Shadow Quality** - –∫–∞—á–µ—Å—Ç–≤–æ —Ç–µ–Ω–µ–π
- **Texture Quality** - –∫–∞—á–µ—Å—Ç–≤–æ —Ç–µ–∫—Å—Ç—É—Ä
- **Effect Quality** - –∫–∞—á–µ—Å—Ç–≤–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

#### –§—É–Ω–∫—Ü–∏–∏:
```cpp
// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥—Ä–∞—Ñ–∏–∫–∏
void ApplyGraphicsSettings(const FGraphicsSettings& Settings);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
void AutoDetectOptimalSettings();

// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
float GetCurrentFPS() const;
int32 GetGPUMemoryUsage() const;
```

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
cd /home/ni/Projects/la2bots/modern_client
./setup_graphics.sh
```

### 2. –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Unreal Engine 4.27
2. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ PBR –º–∞—Ç–µ—Ä–∏–∞–ª—ã
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ HDR —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
5. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –¥–ª—è –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã

### 3. Ubuntu –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
```cpp
// –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Ubuntu Linux
UGraphicsManager::OptimizeForUbuntu();

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenGL
UGraphicsManager::SetOpenGLSettings();

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vulkan
UGraphicsManager::SetVulkanSettings();
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- **FPS** - –∫–∞–¥—Ä—ã –≤ —Å–µ–∫—É–Ω–¥—É
- **Frame Time** - –≤—Ä–µ–º—è –∫–∞–¥—Ä–∞
- **GPU Memory** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ GPU
- **VRAM Usage** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏
- **System Memory** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–∞–º—è—Ç–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- **Texture Streaming** - –ø–æ—Ç–æ–∫–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—Å—Ç—É—Ä
- **LOD System** - —Å–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
- **Culling** - –æ—Ç—Å–µ—á–µ–Ω–∏–µ –Ω–µ–≤–∏–¥–∏–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **Batching** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

## üéÆ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### –ü–µ—Ä—Å–æ–Ω–∞–∂–∏:
- PBR –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –∫–æ–∂–∏ –∏ –æ–¥–µ–∂–¥—ã
- –ü–æ–¥–ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ —Ä–∞—Å—Å–µ–∏–≤–∞–Ω–∏–µ –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π –∫–æ–∂–∏
- Clear Coat –¥–ª—è –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### –û–∫—Ä—É–∂–µ–Ω–∏–µ:
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã
- –ü–æ–≥–æ–¥–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- –ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–π —Ç—É–º–∞–Ω

### –≠—Ñ—Ñ–µ–∫—Ç—ã:
- –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è
- –ë–æ–µ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- –ß–∞—Å—Ç–∏—Ü—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üîß –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏:
```cpp
// –í–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –æ—Ç–ª–∞–¥–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∏
UGraphicsManager::SetGraphicsDebugMode(true);

// –ü–æ–∫–∞–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∏
UGraphicsManager::ShowGraphicsStatistics();
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –í—Å–µ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `Config/DefaultEngine.ini`

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Unreal Engine 4.27 Documentation](https://docs.unrealengine.com/4.27/)
- [PBR Material Guide](https://docs.unrealengine.com/4.27/en-US/RenderingAndGraphics/Materials/PhysicallyBased/)
- [HDR Rendering Guide](https://docs.unrealengine.com/4.27/en-US/RenderingAndGraphics/LightingAndShadows/HDR/)
- [Particle Systems Guide](https://docs.unrealengine.com/4.27/en-US/Engine/Effects/ParticleSystems/)

---

*–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–æ: 2024-09-27*  
*–í–µ—Ä—Å–∏—è: 4.1 - Modern Graphics System Complete*
